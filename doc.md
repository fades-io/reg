Для того, чтобы осуществялять регистрацию новых пользователей в приложение предусмотрен микросервис регистрации. 
Он принимает следующие данные в строковом формате:
* логин
* электронную почту
* пароль

После этого в базу данных вносится новый пользователь.
Затем он сможет пользоваться приложением, в том числе получать токен для доступа к содержимому, проходить тесты и вести собственную статистику.

# Запуск микросервиса
Код для запуска приложения хранится в папке cmd
В нем содержится файл main.go который будет исполняться при запуске микросервиса.
Там содержится функция main() которая является корневой для программы, написанной на языке Go.
В ней сначала загружается значения из файла .env в котором содержатся параметры запуска микросервиса, такие как:
* адрес хоста
* прослушиваемый порт
* адрес хоста базы данных
* порт базы данных
* драйвер базы данных
* данные пользователя базы данных

Запуск осуществялется с помощью функции Run(), которая создает и запускает сервер.
# Подключение к БД
При запуске микросервиса сначала конфигурируется подключение к базе данных.
Конфигурация имеет вид
```
type DbConfig struct {
	driver   string
	host     string
	port     string
	name     string
	user     string
	password string
}
```
В данную структуру передаются значения из .env файла.
Затем происходит подключение к базе данных и создается объект хранилища.
После этого сервер инициализируется данным хранилищем.

# Структура сервера
Сервер имеет структуру
```
type Server struct {
	service Service
	Router  *httprouter.Router
}
```
Для инициализации сервера необходимо создать сервис и роутер для этого сервера.
# Инициализация сервиса
Сервис содержит интерфейс для регистрации нового пользователя RegUser().
Он обращается к интерфейсу работы с БД и вызывает у него метод RegUser().
Его реализация содержится в файле postgresql.go в котором содержится логика работы с базой данных PostgreSQL.
Непосредственная работа с базой данных происходит с помощью библиотеки GORM.
В ней используется технология программирования, связывающая базы данных с объектами в программе.
Такой объект, представляющий данные о новом пользователе, который собирается зарегистрироваться в приложении, содержится в доменной области программы и имеет вид: 
```
type UserToDB struct {
	ID       uint32
	Username string
	Email    string
	Password string
}
```
Процесс добавления пользователя в БД приложения происходит с помощью команды
`Create(&domain.UserToDB{Username: username, Email: email, Password: password})`

# Инициализация роутера
При инициализации сервера также создается объект роутера.
Роутер нужен для того, чтобы перехватывать и обрабатывать запросы по сети.
При инициализации роутеру нужно передать адаптер `HandlerFunc`, который позволит обрабатывать запросы.
`server.Router.HandlerFunc(http.MethodPost, userRegURL, middlewares.SetHeadersMiddleware(server.Reg))`
Для этого передается метод, адрес и объект промежуточного слоя (middleware), который установит заголовки.
Все такие объекты являются посредниками при запросах и хранятся в пакете middleware.go .
